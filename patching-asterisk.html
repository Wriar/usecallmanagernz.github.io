<!DOCTYPE html>
<html>
  <head>
    <title>Patching Asterisk</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" type="text/css" href="includes/theme.css">
    <link rel="stylesheet" type="text/css" href="includes/prettify.css">
  </head>
  <body>
    <header>
      <img src="images/logo.png" alt="">
      <h2>&lt;<span>proxy</span>&gt;</h2><h1><span>USECALLMANAGER</span>.nz</h1><h2>&lt;/<span>proxy</span>&gt;</h2>
    </header>
    <main>
      <nav>
        <ul>
          <li><a href="documentation-overview.html"><span class="icon">home</span> Documentation Overview</a></li>
          <li><span class="icon selected">build</span> <b>Patching Asterisk</b></li>
        </ul>
        <ul>
          <li><h3>Network Configuration</h3></li>
          <li><a href="dhcpd-conf.html"><span class="icon">settings_ethernet</span> DHCP Options</a></li>
          <li><a href="apache-conf.html"><span class="icon">file_download</span> HTTP Provisioning</a></li>
          <li><a href="tftpd-conf.html"><span class="icon">file_download</span> TFTP Provisioning</a></li>
        </ul>
        <ul>
          <li><h3>Phone Configuration</h3></li>
          <li><a href="sepmac-cnf-xml.html"><span class="icon">settings_phone</span> SEPMAC.cnf.xml</a></li>
          <li><a href="dial-template-xml.html"><span class="icon">dialpad</span> Dial Templates</a></li>
          <li><a href="app-dial-rules-xml.html"><span class="icon">bluetooth</span> Application Dial Rules</a></li>
          <li><a href="soft-keys-xml.html"><span class="icon">power_input</span> Soft Keys</a></li>
          <li><a href="line-keys-xml.html"><span class="icon">format_list_bulleted</span> Line Keys</a></li>
          <li><a href="feature-policy-xml.html"><span class="icon">fact_check</span> Feature Policy</a></li>
          <li><a href="network-locale.html"><span class="icon">language</span> Network Locale</a></li>
          <li><a href="user-locale.html"><span class="icon">face</span> User Locale</a></li>
          <li><a href="load-information.html"><span class="icon">file_upload</span> Firmware Load Information</a></li>
          <li><a href="image-list-xml.html"><span class="icon">wallpaper</span> Background Images</a></li>
          <li><a href="ring-list-xml.html"><span class="icon">ring_volume</span> Ring Tones</a></li>
          <li><a href="itl-file-tlv.html"><span class="icon">security</span> Device Security</a></li>
          <li><a href="trust-verification.html"><span class="icon">verified</span> Trust Verification</a></li>
          <li><a href="vpn-group.html"><span class="icon">vpn_key</span> VPN Connection</a></li>
        </ul>
        <ul>
          <li><h3>Asterisk Configuration</h3></li>
          <li><a href="sip-conf.html"><span class="icon">dialer_sip</span> SIP Peers</a></li>
          <li><a href="sip-notify-conf.html"><span class="icon">settings_power</span> SIP Notify Commands</a></li>
          <li><a href="extensions-conf.html"><span class="icon">format_list_numbered</span> Dialplan Extensions</a></li>
          <li><a href="res-parking-conf.html"><span class="icon">local_parking</span> Call Parking</a></li>
          <li><a href="sippeer-options.html"><span class="icon">code</span> SIPPEER Options</a></li>
          <li><a href="rtp-streaming.html"><span class="icon">volume_up</span> RTP Streaming</a></li>
          <li><a href="command-line.html"><span class="icon">keyboard_arrow_right</span> Command Line</a></li>
        </ul>
        <ul>
          <li><h3>XML Services</h3></li>
          <li><a href="phone-services-xml.html"><span class="icon">settings</span> Phone Services</a></li>
          <li><a href="cgi-execute-xml.html"><span class="icon">phone_forwarded</span> CGI Execute</a></li>
        </ul>
        <ul>
          <li><h3>Additional Features</h3></li>
          <li><a href="as-feature-events.html"><span class="icon">extension</span> AS Feature Events</a></li>
        </ul>
      </nav>
      <article>
        <h1>Patching Asterisk</h1>
        Steps for patching, compiling and installed the modified version of Asterisk are below. You should be familiar with building from source before attempting this.<br>
        <br>
        <b>1.</b> Download a copy of the patch below, the patch is also available from the Asterisk issue tracker.<br>
        <br>
        <h2>Supported</h2>
        <a href="https://raw.githubusercontent.com/usecallmanagernz/patches/master/asterisk/cisco-usecallmanager-18.4.0.patch"><span class="icon">file_download</span> cisco-usecallmanager-18.4.0.patch</a> (321K) <span class="icon">event</span> 11/06/2021 <span class="icon">security</span> SHA256:4687b242edc5ab9b4d88d4607ae863b4a1d2642526874b1913f51242fd0f3a11.<br>
        <a href="https://raw.githubusercontent.com/usecallmanagernz/patches/master/asterisk/cisco-usecallmanager-16.18.0.patch"><span class="icon">file_download</span> cisco-usecallmanager-16.18.0.patch</a> (321K) <span class="icon">event</span> 11/06/2021 <span class="icon">security</span> SHA256:9e6dad78f441dc2532a104d3cf5e58562281b11dd6a88694759cae39f5747347.<br>
        <br>
        <h2>Security Fixes Only</h2>
        <a href="https://raw.githubusercontent.com/usecallmanagernz/patches/master/asterisk/cisco-usecallmanager-13.38.2.patch"><span class="icon">file_download</span> cisco-usecallmanager-13.38.2.patch</a> (325K) <span class="icon">event</span> 23/04/2021 <span class="icon">security</span> SHA256:8508cbe7396464fc01430fea5669c24be25c876f85718d721de1b66e0be7a3db.<br>
        <br>
        Digium/Asterisk JIRA issue <a href="https://issues.asterisk.org/jira/browse/ASTERISK-13145"><span class="icon">open_in_browser</span> ASTERISK-13145</a>.<br>
        <br>
        <b>2.</b> Download the version of Asterisk that matches the version number in the name of the patch.<br>
        <br>
        <a href="http://asterisk.org/downloads"><span class="icon">open_in_browser</span> Asterisk Downloads</a>.<br>
        <br>
        <b>3.</b> Extract the archive and apply the patch.<br>
        <br>
        <code class="command-line">~$ tar -zxvf asterisk-18.4.0.tar.gz
~$ cd asterisk-18.4.0
~/asterisk-18.4.0$ patch -p1 &lt; ../cisco-usecallmanager-18.4.0.patch</code>
        <br>
        <b>4.</b> Configure the build environment and build the source.<br>
        <br>
        <code class="command-line">~/asterisk-18.4.0$ CFLAGS="-DENABLE_SRTP_AES_GCM -DENABLE_SRTP_AES_256" ./configure
~/asterisk-18.4.0$ make</code>
        <br>
        <b>5.</b> Install the patched version.<br>
        <br>
        <code class="command-line">~/asterisk-18.4.0$ sudo make install</code>
        <br>
        <b>6.</b> Optionally install the sample configuration files. <b>Note</b>: sample sip.conf, sip_notify.conf and res_parking.conf contain patch-specific features so you will need to do this at least once.<br>
        <br>
        <code class="command-line">~/asterisk-18.4.0$ sudo make samples</code>
      </article>
    </main>
    <footer></footer>
  </body>
</html>
